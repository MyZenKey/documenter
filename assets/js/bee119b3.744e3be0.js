"use strict";(self.webpackChunkdevpub=self.webpackChunkdevpub||[]).push([[7301],{3905:function(e,n,t){t.d(n,{Zo:function(){return d},kt:function(){return h}});var r=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var u=r.createContext({}),c=function(e){var n=r.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},d=function(e){var n=c(e.components);return r.createElement(u.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},l=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,i=e.originalType,u=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),l=c(t),h=o,E=l["".concat(u,".").concat(h)]||l[h]||p[h]||i;return t?r.createElement(E,a(a({ref:n},d),{},{components:t})):r.createElement(E,a({ref:n},d))}));function h(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=t.length,a=new Array(i);a[0]=l;var s={};for(var u in n)hasOwnProperty.call(n,u)&&(s[u]=n[u]);s.originalType=e,s.mdxType="string"==typeof e?e:o,a[1]=s;for(var c=2;c<i;c++)a[c]=t[c];return r.createElement.apply(null,a)}return r.createElement.apply(null,t)}l.displayName="MDXCreateElement"},8681:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return s},contentTitle:function(){return u},metadata:function(){return c},toc:function(){return d},default:function(){return l}});var r=t(7462),o=t(3366),i=(t(7294),t(3905)),a=["components"],s={sidebar_position:5},u="Receiving Authorization Request Response on Android",c={unversionedId:"android/quickstart/android-receive-an-authorization-request-response",id:"android/quickstart/android-receive-an-authorization-request-response",isDocsHomePage:!1,title:"Receiving Authorization Request Response on Android",description:"ZenKey's SDK returns the authorization result using an Intent. To receive responses from authorization requests, your Activity must be designed to receive the Intent.",source:"@site/docs/android/quickstart/android-receive-an-authorization-request-response.md",sourceDirName:"android/quickstart",slug:"/android/quickstart/android-receive-an-authorization-request-response",permalink:"/documenter/docs/android/quickstart/android-receive-an-authorization-request-response",editUrl:"https://github.com/MyZenKey/documenter/edit/main/docs/android/quickstart/android-receive-an-authorization-request-response.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Adding ZenKey Button on Android",permalink:"/documenter/docs/android/quickstart/android-add-the-zenkey-button"},next:{title:"Handling Authorization Responses on Android",permalink:"/documenter/docs/android/quickstart/android-handling-authorization-responses"}},d=[],p={toc:d};function l(e){var n=e.components,t=(0,o.Z)(e,a);return(0,i.kt)("wrapper",(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"receiving-authorization-request-response-on-android"},"Receiving Authorization Request Response on Android"),(0,i.kt)("p",null,"ZenKey's SDK returns the authorization result using an Intent. To receive responses from authorization requests, your Activity must be designed to receive the Intent."),(0,i.kt)("p",null,"To handle callbacks, use the ",(0,i.kt)("inlineCode",{parentName:"p"},"onActivityResult()")," method. Results come back in the requesting Activity/Fragment ",(0,i.kt)("inlineCode",{parentName:"p"},"onActivityResult()")," method even without any ",(0,i.kt)("inlineCode",{parentName:"p"},"PendingIntent")," for your request,"),(0,i.kt)("p",null,"When the Activity ends, the result the authorization request passes back with ",(0,i.kt)("inlineCode",{parentName:"p"},"onActivityResult(int requestCode, int resultCode, Intent data)"),". Because the Intent contains the result of the authorization request, you can extract the ",(0,i.kt)("inlineCode",{parentName:"p"},"AuthorizationResponse")," by calling the ",(0,i.kt)("inlineCode",{parentName:"p"},"AuthorizationResponse.fromIntent(intent)")," method."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"public class MyActivity extends AppCompatActivity { \n\n    private static final int REQUEST_CODE_ZENKEY = 1234;\n\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n       if (requestCode == REQUEST_CODE_ZENKEY) {\n          if (resultCode == RESULT_OK) {\n              handleAuthorizationResponse(data);\n          } else {\n             //Authorization canceled by user.\n          }\n       }\n    }\n\n    private void handleAuthorizationResponse(Intent data) {\n       AuthorizationResponse response = AuthorizationResponse.fromIntent(data);\n       if(response.isSuccessful()){\n          // Authorization Succeeded\n          finishZenKeyAuthentication(response);\n       } else {\n           //Authorization Failed\n           handleZenKeyError(response);\n       }\n    }\n\n    private void finishZenKeyAuthentication(AuthorizationResponse response) {\n       String authorizationCode = response.getAuthorizationCode();\n       String redirectUri = response.getRedirectUri();\n       String mcc = response.getMcc();\n       String mnc = response.getMnc();\n       // Send these values to your backend to finish the authentication process.\n    }\n\n    private void handleZenKeyError(AuthorizationResponse response) {\n       AuthorizationError error = response.getError();\n       switch (error){\n          case AuthorizationError.INVALID_CONFIGURATION:\n             break;\n          case AuthorizationError.INVALID_REQUEST:\n             break;\n          case AuthorizationError.REQUEST_DENIED:\n             break;\n          case AuthorizationError.REQUEST_TIMEOUT:\n             break;\n          case AuthorizationError.SERVER_ERROR:\n             break;\n          case AuthorizationError.NETWORK_FAILURE:\n             break;\n          case AuthorizationError.DISCOVERY_STATE:\n             break;\n          case AuthorizationError.UNKNOWN:\n             break;\n       }\n    }\n}\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"public class MyActivity extends AppCompatActivity {\n\n    private static final int REQUEST_CODE_ZENKEY = 1234;\n\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n       if (requestCode == REQUEST_CODE_ZENKEY) {\n          if (resultCode == RESULT_OK) {\n              handleAuthorizationResponse(data);\n          } else {\n             //Authorization canceled by user.\n          }\n       }\n    }\n\n    private void handleAuthorizationResponse(Intent data) {\n       AuthorizationResponse response = AuthorizationResponse.fromIntent(data);\n       if(response.isSuccessful()){\n          // Authorization Succeeded\n          finishZenKeyAuthentication(response);\n       } else {\n           //Authorization Failed\n           handleZenKeyError(response);\n       }\n    }\n\n    private void finishZenKeyAuthentication(AuthorizationResponse response) {\n       String authorizationCode = response.getAuthorizationCode();\n       String redirectUri = response.getRedirectUri();\n       String mcc = response.getMcc();\n       String mnc = response.getMnc();\n       String codeVerifier = response.getCodeVerifier();\n       // Send these values to your backend to finish the authentication process.\n    }\n\n    private void handleZenKeyError(AuthorizationResponse response) {\n       AuthorizationError error = response.getError();\n       switch (error){\n          case AuthorizationError.INVALID_CONFIGURATION:\n             break;\n          case AuthorizationError.INVALID_REQUEST:\n             break;\n          case AuthorizationError.REQUEST_DENIED:\n             break;\n          case AuthorizationError.REQUEST_TIMEOUT:\n             break;\n          case AuthorizationError.SERVER_ERROR:\n             break;\n          case AuthorizationError.NETWORK_FAILURE:\n             break;\n          case AuthorizationError.DISCOVERY_STATE:\n             break;\n          case AuthorizationError.UNKNOWN:\n             break;\n       }\n    }\n}\n")))}l.isMDXComponent=!0}}]);