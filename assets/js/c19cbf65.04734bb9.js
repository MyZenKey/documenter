"use strict";(self.webpackChunkdevpub=self.webpackChunkdevpub||[]).push([[3507],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return d}});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var c=r.createContext({}),l=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},u=function(e){var n=l(e.components);return r.createElement(c.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},g=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,s=e.originalType,c=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),g=l(t),d=a,m=g["".concat(c,".").concat(d)]||g[d]||p[d]||s;return t?r.createElement(m,o(o({ref:n},u),{},{components:t})):r.createElement(m,o({ref:n},u))}));function d(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var s=t.length,o=new Array(s);o[0]=g;var i={};for(var c in n)hasOwnProperty.call(n,c)&&(i[c]=n[c]);i.originalType=e,i.mdxType="string"==typeof e?e:a,o[1]=i;for(var l=2;l<s;l++)o[l]=t[l];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}g.displayName="MDXCreateElement"},1410:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return i},contentTitle:function(){return c},metadata:function(){return l},toc:function(){return u},default:function(){return g}});var r=t(7462),a=t(3366),s=(t(7294),t(3905)),o=["components"],i={},c="Managing Tokens",l={unversionedId:"best-practices/best-practices-managing-and-enrolling-users/managing-and-enrolling-users-managing-tokens",id:"best-practices/best-practices-managing-and-enrolling-users/managing-and-enrolling-users-managing-tokens",isDocsHomePage:!1,title:"Managing Tokens",description:"When the carrier issues an accesstoken and idtoken, by default the accesstoken expires within 30 minutes (1800 seconds) as defined by the 'expiresin' parameter of the token response.",source:"@site/docs/best-practices/best-practices-managing-and-enrolling-users/managing-and-enrolling-users-managing-tokens.md",sourceDirName:"best-practices/best-practices-managing-and-enrolling-users",slug:"/best-practices/best-practices-managing-and-enrolling-users/managing-and-enrolling-users-managing-tokens",permalink:"/documenter/docs/best-practices/best-practices-managing-and-enrolling-users/managing-and-enrolling-users-managing-tokens",editUrl:"https://github.com/MyZenKey/documenter/edit/main/docs/best-practices/best-practices-managing-and-enrolling-users/managing-and-enrolling-users-managing-tokens.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Enrolling New Users",permalink:"/documenter/docs/best-practices/best-practices-managing-and-enrolling-users/managing-and-enrolling-users-enroll-new-users"},next:{title:"Registering Trusted Devices",permalink:"/documenter/docs/best-practices/best-practices-managing-and-enrolling-users/managing-and-enrolling-users-register-trusted-devices"}},u=[],p={toc:u};function g(e){var n=e.components,t=(0,a.Z)(e,o);return(0,s.kt)("wrapper",(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"managing-tokens"},"Managing Tokens"),(0,s.kt)("p",null,"When the carrier issues an access_token and id_token, by default the access_token expires within 30 minutes (1800 seconds) as defined by the 'expires_in' parameter of the token response.   "),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},'HTTP/1.1 200 OK \nContent-type: application/json \nCache-control: no-cache \n\n{ \n     "access_token": "...", \n     "token_type": "Bearer", \n     "refresh_token": "8xLOxBtZp8", \n     "expires_in": 1800, \n     "correlation_id":"xxxxx", \n     "id_token": "..." \n}\n')),(0,s.kt)("p",null,"Despite the relatively short expiration of the access_token, we discourage you from using ZenKey for session management in your app. Failing to destroy the server-side session is a common and dangerous logout error since keeping the session or token alive, even after the user logs out of the application, allows attackers valid authentication data and therefore the ability to hijack a user\u2019s account."),(0,s.kt)("p",null,"The best practice is to store your access tokens in a secure database. Restrict access to that database so that your client secret and access tokens are only readable by the owner, limiting edit/write privileges to the database table and encrypting access tokens before placing them in any data stores."),(0,s.kt)("p",null,"Regarding the id_token, when you Base64url-decode its JWT payload, ensure that no line breaks, whitespace, or other additional characters were used as these suggest foul play. Remember that the id_token contains claims about the authentication of your end-user, so you should always validate these standard claims such as the token expiration and token issuer. "),(0,s.kt)("p",null,"Additionally, check that the structures of the JWT\u2014its header, payload, and signature\u2014are well-formed. Verify that the token is correctly signed by the correct entity using the proper key. If using a nonce, confirm that it is included in the id_token as well. Forward the JWT to your API as a header; never persist it in localstorage or create cookies on the client to save the JWT."),(0,s.kt)("p",null,"Although these best practices for managing tokens are by no means exhaustive, please be sure to take these precautions before using an access_token to request user info."))}g.isMDXComponent=!0}}]);