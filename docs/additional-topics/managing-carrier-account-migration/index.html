<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/documenter/blog/rss.xml" title="ZenKey Docs Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/documenter/blog/atom.xml" title="ZenKey Docs Blog Atom Feed"><title data-react-helmet="true">(Coming soon) Managing Carrier Migration | ZenKey Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://myzenkey.github.io/documenter//documenter/docs/additional-topics/managing-carrier-account-migration"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="(Coming soon) Managing Carrier Migration | ZenKey Docs"><meta data-react-helmet="true" name="description" content="A future release of ZenKey will support account migration. Meanwhile, Service Providers can begin using the following instructions now as required."><meta data-react-helmet="true" property="og:description" content="A future release of ZenKey will support account migration. Meanwhile, Service Providers can begin using the following instructions now as required."><link data-react-helmet="true" rel="shortcut icon" href="/documenter/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://myzenkey.github.io/documenter//documenter/docs/additional-topics/managing-carrier-account-migration"><link data-react-helmet="true" rel="alternate" href="https://myzenkey.github.io/documenter//documenter/docs/additional-topics/managing-carrier-account-migration" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://myzenkey.github.io/documenter//documenter/docs/additional-topics/managing-carrier-account-migration" hreflang="x-default"><link rel="stylesheet" href="/documenter/assets/css/styles.9e49aaa5.css">
<link rel="preload" href="/documenter/assets/js/runtime~main.e4d0dd18.js" as="script">
<link rel="preload" href="/documenter/assets/js/main.49ce807f.js" as="script">
</head>
<body data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/documenter/"><img src="/documenter/img/ZenKey_symbol_rgb.png" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/documenter/img/ZenKey_symbol_rgb.png" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">ZenKey Docs</b></a><a class="navbar__item navbar__link navbar__link--active" href="/documenter/docs/intro">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/MyZenKey/documenter/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitLab<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">üåû</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="dsla-search-wrapper"><div class="dsla-search-field"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/documenter/docs/intro">Welcome</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Conceptual Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tech Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Android Guide</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Web Guide</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Best Practices</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Integration Guide</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Portal User Guide</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Additional Topics</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Discovery Flows</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/documenter/docs/additional-topics/consenting-to-share-user-information">Consenting to share user information</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/documenter/docs/additional-topics/discovery-flows">Discovery Flows</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/documenter/docs/additional-topics/managing-carrier-account-migration">(Coming soon) Managing Carrier Migration</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Singular Key</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>(Coming soon) Managing Carrier Migration</h1></header><p>A future release of ZenKey will support account migration. Meanwhile, Service Providers can begin using the following instructions now as required.</p><p>ZenKey supports users who migrate to new carriers. When users switch to a new carrier, they receive unique identifiers (the user‚Äôs ‚Äúsub‚Äù) based on the new carrier. If users opt to migrate their ZenKey accounts to new carriers, ZenKey provides a reference to any previous carrier sub for users. Any stored deprecated user subs are replaceable with new ones. </p><p>Users can move their ZenKey account within 180 days of porting their line. After migrating ZenKey to their carriers, subsequent ZenKey logins for the next 180 days will contain the port_token.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="how-to-detect-and-handle-users-who-migrated-to-new-mobile-carriers"></a>How to detect and handle users who migrated to new mobile carriers.<a class="hash-link" href="#how-to-detect-and-handle-users-who-migrated-to-new-mobile-carriers" title="Direct link to heading">#</a></h2><p>When users who migrated to new carriers use ZenKey, the new carriers handle the migration process. The ZenKey SDKs or the discovery-ui endpoints manage the transitions automatically. The responses from the carriers&#x27; token_endpoint contain the current/new sub that identifies users. Subs also contain an array of JWT port_tokens in the ‚Äúaka‚Äù parameter of the id_token. These port tokens identify previous subs for the user.</p><p>A decoded port token contains data in the following format:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#212121;background-color:#F8F9FA"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#212121"><span class="token plain">{typ=port_token+jwt,kid=xxx}</span></span><span class="token-line" style="color:#212121"><span class="token plain">{</span></span><span class="token-line" style="color:#212121"><span class="token plain">  &quot;iss&quot;: &quot;https://ZenKey.old_carrier.com&quot;,</span></span><span class="token-line" style="color:#212121"><span class="token plain">  &quot;sub&quot;: &quot;mncmcc-75984731587234asdf&quot;,</span></span><span class="token-line" style="color:#212121"><span class="token plain">  &quot;iat&quot;: 1516239022</span></span><span class="token-line" style="color:#212121"><span class="token plain">  &quot;aud&quot;: client_id</span></span><span class="token-line" style="color:#212121"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>To determine if a user new or a returning one, complete the carrier token request on your secure server. Afterward, perform the following steps:</p><ol><li>Search your user database for the user‚Äôs current sub. Reference the user by their sub and not their phone, email, or other property. Those properties sometimes change and/or the user may not opt to share them.</li><li>If you find a user in your database with the matching sub, proceed with that recognized user and skip the remaining steps below. Otherwise, this may be either a user who migrated to a new carrier or a new user.</li><li>Decode any port_token JWTs. No port token means it is a new user. Prompt the user to register or link an existing account as appropriate for your service.</li><li>Verify that each port_token issuer (iss) URL is a trusted carrier. The following is a list of valid <code>iss</code> URLs:<ul><li>*.att.com</li><li>*.verizon.com</li><li>*.t-mobile.com</li><li>*.myzenkey.com</li><li>*.xcijv.com</li></ul></li><li>Use the port_token issuer (iss) URL to extract the OpenID configuration of the old carrier and get their JWKs. Use the key ID (KID) in the port_token to identify the JWK key to use to verify the token‚Äôs signature.</li><li>Search your database for user accounts linked to the subs in verified port tokens. If you find a user with any of the old subs, update the references in the database to the new sub from the new carrier.</li><li>If you cannot find a matching user, treat the user as new to your service. For more information, see the notes section.</li></ol><p>Note: Always provide all new users with the option to link to an existing account for your service, even if the existing account in your database is already linked to a (possibly old) user.\n - A user may choose not to migrate their ZenKey or may not use your app within 180 days of migration. Therefore, a new or unrecognized user might still be a returning user of your app. \n - If a user migrated carriers more than 180 days ago, the new carrier may no longer provide a port_token.\n - There are other scenarios where an existing user appears to be a new ZenKey user. For example, if a user is locked out of their ZenKey and unable to recover the account, the user may choose to create a new ZenKey.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/MyZenKey/documenter/edit/main/docs/additional-topics/managing-carrier-account-migration.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/documenter/docs/additional-topics/discovery-flows"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ Discovery Flows</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/documenter/docs/singular-key/FlowAPI"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Singular Key Flow Integration via API ¬ª</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-to-detect-and-handle-users-who-migrated-to-new-mobile-carriers" class="table-of-contents__link">How to detect and handle users who migrated to new mobile carriers.</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/documenter/docs/intro">Welcome</a></li><li class="footer__item"><a class="footer__link-item" href="/documenter/docs/conceptual-overview/definitions-basic-concepts">Basic Concepts</a></li><li class="footer__item"><a class="footer__link-item" href="/documenter/docs/tech-overview/authentication-flows">Authentication Flows</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/zenkey" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.facebook.com/myzenkey" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/myzenkey" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/zenkey/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UC-0FnMmgpk3bmTy1LoxRE_Q" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/MyZenKey" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2021 ZenKey.</div></div></div></footer></div>
<script src="/documenter/assets/js/runtime~main.e4d0dd18.js"></script>
<script src="/documenter/assets/js/main.49ce807f.js"></script>
</body>
</html>